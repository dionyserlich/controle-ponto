{"version":3,"sources":["views/PontosView.js"],"names":["View","HoraHelper","PontosView","elemento","contexto","addEventListener","e","idRegistro","target","id","nodeName","document","querySelector","value","parentElement","childNodes","textContent","attributes","getNamedItem","$","openModal","complete","limpaForm","model","listaPontos","somaHorasTrabalhadas","somaBancoDeHoras","_pontos","map","array","pontoObj","forEach","element","total","bancoHoras","getHoraString","moment","duration","n","data","entrada1","hora","saida1","entrada2","saida2","entrada3","saida3","totalFormatado","bancoHorasFormatado","join"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAOA,gB;;AACAC,sB;;;;;;;;;;;;;;;;;;;;;AAEDC,sB;;;AAEF,oCAAYC,QAAZ,EAAsBC,QAAtB,EAAgC;AAAA;;AAAA,wIAEtBD,QAFsB;;AAI5BA,6BAASE,gBAAT,CAA0B,OAA1B,EAAmC,UAASC,CAAT,EAAY;AAC3C,4BAAIC,aAAaD,EAAEE,MAAF,CAASC,EAA1B;AACA,4BAAIH,EAAEE,MAAF,CAASE,QAAT,IAAqB,IAArB,IAA6BH,UAAjC,EAA6C;AACzCI,qCAASC,aAAT,CAAuB,gBAAvB,EAAyCC,KAAzC,GAAiDP,EAAEE,MAAF,CAASM,aAAT,CAAuBC,UAAvB,CAAkC,CAAlC,EAAqCC,WAAtF;AACAL,qCAASC,aAAT,CAAuB,gBAAvB,EAAyCC,KAAzC,GAAiDP,EAAEE,MAAF,CAASQ,WAA1D;AACAL,qCAASC,aAAT,CAAuB,sBAAvB,EAA+CK,UAA/C,CAA0DC,YAA1D,CAAuE,aAAvE,EAAsFL,KAAtF,GAA8FN,UAA9F;AACAY,8BAAE,iBAAF,EAAqBC,SAArB,CAA+B;AAC3BC,0CAAU,oBAAW;AACjBjB,6CAASkB,SAAT;AACH;AAH0B,6BAA/B;AAKH;AACJ,qBAZD;AAJ4B;AAiB/B;;;;6CAEQC,K,EAAO;;AAER,4BAAIC,cAAc,EAAlB;AACA,4BAAIC,uBAAuB,CAA3B;AACA,4BAAIC,mBAAmB,CAAvB;AACAH,8BAAMI,OAAN,CAAcC,GAAd,CAAkB,iBAAS;AACvB;AACAJ,0CAAcK,MAAMD,GAAN,CAAU;AAAA,uCAAYE,QAAZ;AAAA,6BAAV,CAAd;AACA;AACAN,wCAAYO,OAAZ,CAAoB,UAASC,OAAT,EAAkB;;AAElCP,wDAAwBO,QAAQC,KAAhC;AACAP,oDAAoBM,QAAQE,UAA5B;AACH,6BAJD;AAMH,yBAVD;;AAYAvB,iCAASC,aAAT,CAAuB,mBAAvB,EAA4CI,WAA5C,GAA0Df,WAAWkC,aAAX,CAAyBC,OAAOC,QAAP,CAAgBZ,oBAAhB,EAAsC,cAAtC,CAAzB,CAA1D;AACAd,iCAASC,aAAT,CAAuB,eAAvB,EAAwCI,WAAxC,GAAsDf,WAAWkC,aAAX,CAAyBC,OAAOC,QAAP,CAAgBX,gBAAhB,EAAkC,cAAlC,CAAzB,CAAtD;;AAEA,8qBAgBUF,YAAYI,GAAZ,CAAgB;AAAA,oIAEJU,EAAEC,IAFE,mDAGAD,EAAEE,QAAF,CAAW/B,EAHX,WAGmB6B,EAAEE,QAAF,CAAWC,IAH9B,mDAIAH,EAAEI,MAAF,CAASjC,EAJT,WAIiB6B,EAAEI,MAAF,CAASD,IAJ1B,mDAKAH,EAAEK,QAAF,CAAWlC,EALX,WAKmB6B,EAAEK,QAAF,CAAWF,IAL9B,mDAMAH,EAAEM,MAAF,CAASnC,EANT,WAMiB6B,EAAEM,MAAF,CAASH,IAN1B,sDAOAH,EAAEO,QAAF,CAAWpC,EAPX,WAOmB6B,EAAEO,QAAF,CAAWJ,IAP9B,gFAQAH,EAAEQ,MAAF,CAASrC,EART,WAQiB6B,EAAEQ,MAAF,CAASL,IAR1B,+CASJH,EAAES,cATE,+CAUJT,EAAEU,mBAVE;AAAA,yBAAhB,EAaRC,IAbQ,CAaH,EAbG,CAhBV,CA6BU,mEA7BV;AAoCP;;;;cA7EoBjD,I;;+BAgFVE,U","file":"views/PontosView.js","sourcesContent":["import View from './View';\nimport HoraHelper from '../helpers/HoraHelper';\n\nclass PontosView extends View {\n\n    constructor(elemento, contexto) {\n        //elemento do DOM que receberá o TEMPLATE e passará para a classe PAI (view)\n        super(elemento);\n\n        elemento.addEventListener('click', function(e) {\n            let idRegistro = e.target.id;\n            if (e.target.nodeName == 'TD' && idRegistro) {\n                document.querySelector('#data_registro').value = e.target.parentElement.childNodes[1].textContent;\n                document.querySelector('#hora_registro').value = e.target.textContent;\n                document.querySelector('.form-cadastro-ponto').attributes.getNamedItem(\"id-registro\").value = idRegistro;\n                $('#modal-registro').openModal({\n                    complete: function() {\n                        contexto.limpaForm()\n                    }\n                });\n            }\n        })\n    }\n\n    template(model) {\n\n            let listaPontos = [];\n            let somaHorasTrabalhadas = 0;\n            let somaBancoDeHoras = 0;\n            model._pontos.map(array => {\n                //Mapeia os objetos pra dentro da lista fora do escopo\n                listaPontos = array.map(pontoObj => pontoObj);\n                //Soma as horas trabalhadas e o banco             \n                listaPontos.forEach(function(element) {\n\n                    somaHorasTrabalhadas += element.total;\n                    somaBancoDeHoras += element.bancoHoras;\n                });\n\n            })\n\n            document.querySelector('#horasTrabalhadas').textContent = HoraHelper.getHoraString(moment.duration(somaHorasTrabalhadas, 'milliseconds'));\n            document.querySelector('#bancoDeHoras').textContent = HoraHelper.getHoraString(moment.duration(somaBancoDeHoras, 'milliseconds'));\n\n            return `\n         <table class=\"highlight centered responsive-table table-ponto\">\n                <thead class=\"card\">\n                    <tr>\n                        <th>Data</th>\n                        <th>Entrada</th>\n                        <th>Saída</th>\n                        <th>Entrada</th>\n                        <th>Saída</th>\n                        <th>Entrada</th>\n                        <th>Saída</th>\n                        <th>Total Trabalho</th>\n                        <th>Banco de horas</th>\n                    </tr>\n                </thead>\n                <tbody>                    \n                    ${listaPontos.map(n => `\n                        <tr>                            \n                            <td>${n.data}</td>\n                            <td id=\"${n.entrada1.id}\"> ${n.entrada1.hora}</td>\n                            <td id=\"${n.saida1.id}\"> ${n.saida1.hora}</td>\n                            <td id=\"${n.entrada2.id}\"> ${n.entrada2.hora}</td>\n                            <td id=\"${n.saida2.id}\"> ${n.saida2.hora}</td>   \n                            <td id=\"${n.entrada3.id}\"> ${n.entrada3.hora}</td>                             \n                            <td id=\"${n.saida3.id}\"> ${n.saida3.hora}</td>\n                            <td>${n.totalFormatado}</td>\n                            <td>${n.bancoHorasFormatado}</td>\n                        <tr>\n                        `\n            ).join('')/** O join concatena os elementos de um array em uma mega string */}\n                </tbody>\n                \n            </table>\n            \n        `;\n\n    }\n}\n\nexport default PontosView;"],"sourceRoot":"/source/"}