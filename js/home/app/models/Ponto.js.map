{"version":3,"sources":["models/Ponto.js"],"names":["HoraHelper","Ponto","dataPonto","registros","pontoZerado","Date","_dataPonto","_registros","_entrada1","id","hora","moment","duration","_data_registro","format","_saida1","_entrada2","_saida2","_entrada3","_saida3","_horasDiarias","_tolerânciaDiaria","Object","freeze","total","add","_total","praMais","getDuration","praMenos","subtract","hours","id_ponto","_id","id_usuario","_idUsuario","data_registro","_dataRegistro","registro","getHoraString","asMilliseconds","_banco"],"mappings":"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","file":"models/Ponto.js","sourcesContent":["import HoraHelper from '../helpers/HoraHelper';\n\nclass Ponto {\n\n    constructor(dataPonto, registros) {\n\n        let pontoZerado = new Date(2016, 1, 1, 0, 0, 0);\n\n        this._dataPonto = dataPonto;\n        this._registros = registros ? registros : [];\n        //Primeiro Par\n        this._entrada1 = {\n            id: (this._registros[0] ? this._registros[0].id : \"\"),\n            hora: moment.duration(moment(this._registros[0] ? this._registros[0]._data_registro : pontoZerado).format('HH:mm'))\n        };\n        this._saida1 = {\n            id: (this._registros[1] ? this._registros[1].id : \"\"),\n            hora: moment.duration(moment(this._registros[1] ? this._registros[1]._data_registro : pontoZerado).format('HH:mm'))\n        };\n        //Segundo Par\n        this._entrada2 = {\n            id: (this._registros[2] ? this._registros[2].id : \"\"),\n            hora: moment.duration(moment(this._registros[2] ? this._registros[2]._data_registro : pontoZerado).format('HH:mm'))\n        };\n        this._saida2 = {\n            id: (this._registros[3] ? this._registros[3].id : \"\"),\n            hora: moment.duration(moment(this._registros[3] ? this._registros[3]._data_registro : pontoZerado).format('HH:mm'))\n        };\n        //Terceiro Par\n        this._entrada3 = {\n            id: (this._registros[4] ? this._registros[4].id : \"\"),\n            hora: moment.duration(moment(this._registros[4] ? this._registros[4]._data_registro : pontoZerado).format('HH:mm'))\n        };\n        this._saida3 = {\n            id: (this._registros[5] ? this._registros[5].id : \"\"),\n            hora: moment.duration(moment(this._registros[5] ? this._registros[5]._data_registro : pontoZerado).format('HH:mm'))\n        };\n\n        this._horasDiarias = \"08:00\";\n        this._tolerânciaDiaria = \"00:10\";\n\n        Object.freeze(this);\n    }\n\n    //Methods\n    _total() {\n        let total = new moment.duration();\n\n        //Diferenças pares de hora        \n        total.add(this._saida1.hora - this._entrada1.hora);\n        total.add(this._saida2.hora - this._entrada2.hora);\n        total.add(this._saida3.hora - this._entrada3.hora);\n\n        return total;\n    }\n\n    _banco() {\n\n        let total = this._total();\n\n        //Instaciado 2x o objeto, pois, o duration é mutável, ou seja,\n        //quando é feito a operação \"add\" em um duration, ele altera o valor\n        //E impacata no resultado da próxima operação (subtract)\n        let praMais = HoraHelper.getDuration(this._horasDiarias).add(HoraHelper.getDuration(this._tolerânciaDiaria));\n        let praMenos = HoraHelper.getDuration(this._horasDiarias).subtract(HoraHelper.getDuration(this._tolerânciaDiaria));\n\n        if (total >= praMenos && total <= praMais) {\n            return moment.duration({ hours: 0 });\n        } else {\n            return this._total().subtract(HoraHelper.getDuration(this._horasDiarias));\n        }\n\n\n    }\n\n    /************Getters and Setters************/\n    //Setters\n    set entrada1(registro) {\n        this._entrada1 = HoraHelper.getDuration(registro);\n    }\n    set entrada2(registro) {\n        this._entrada2 = HoraHelper.getDuration(registro);\n    }\n    set entrada3(registro) {\n        this._entrada3 = HoraHelper.getDuration(registro);\n    }\n    set saida1(registro) {\n        this._saida1 = HoraHelper.getDuration(registro);\n    }\n    set saida2(registro) {\n        this._saida2 = HoraHelper.getDuration(registro);\n    }\n    set saida3(registro) {\n        this._saida3 = HoraHelper.getDuration(registro);\n    }\n\n    //Getters\n    get entrada1() {\n        return new Object({\n            id: this._entrada1.id,\n            hora: HoraHelper.getHoraString(this._entrada1.hora)\n        });\n    }\n    get entrada2() {\n        return new Object({\n            id: this._entrada2.id,\n            hora: HoraHelper.getHoraString(this._entrada2.hora)\n        });\n    }\n    get entrada3() {\n        return new Object({\n            id: this._entrada3.id,\n            hora: HoraHelper.getHoraString(this._entrada3.hora)\n        });\n    }\n    get saida1() {\n        return new Object({\n            id: this._saida1.id,\n            hora: HoraHelper.getHoraString(this._saida1.hora)\n        });\n    }\n    get saida2() {\n        return new Object({\n            id: this._saida2.id,\n            hora: HoraHelper.getHoraString(this._saida2.hora)\n        });\n    }\n    get saida3() {\n        return new Object({\n            id: this._saida3.id,\n            hora: HoraHelper.getHoraString(this._saida3.hora)\n        });\n    }\n    get data() {\n        return moment(this._dataPonto).format('DD/MM/YYYY');\n    }\n    get totalFormatado() {\n        return HoraHelper.getHoraString(this._total());\n    }\n    get total() {\n        return this._total().asMilliseconds();\n    }\n    get bancoHorasFormatado() {\n        return HoraHelper.getHoraString(this._banco());\n    }\n    get bancoHoras() {\n        return this._banco();\n    }\n\n    toString() {\n        return {\n            id_ponto: this._id,\n            id_usuario: this._idUsuario,\n            data_registro: moment(this._dataRegistro).format()\n        }\n    }\n\n}\n\nexport default Ponto;"],"sourceRoot":"/source/"}