{"version":3,"sources":["modal-cadastrar.js"],"names":["document","addEventListener","formularioCadastro","querySelector","senha1","elements","senha2","validarSenha","cadastraUsuario","value","length","setCustomValidity","event","preventDefault","cadastro","firebase","auth","createUserWithEmailAndPassword","email","senha","then","currentUser","updateProfile","displayName","nome_completo","catch","console","log","error","limpaFormularioCadastro","$","closeModal","Materialize","toast","setTimeout","window","location","replace","mensagem","code","qtdeElementos","index","elementoAtual","classList","remove"],"mappings":"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","file":"modal-cadastrar.js","sourcesContent":["document.addEventListener('DOMContentLoaded', function () {\n  let formularioCadastro = document.querySelector('#modal-cadastro form');\n\n  let senha1 = formularioCadastro.elements[\"senha1\"];\n  let senha2 = formularioCadastro.elements[\"senha2\"];\n\n  senha1.addEventListener('change', validarSenha);\n  senha2.addEventListener('change', validarSenha);\n  formularioCadastro.addEventListener('submit', cadastraUsuario);\n\n  function validarSenha() {\n    if (senha1.value.length < 6) {\n      senha1.setCustomValidity('Senha precisa ter no mínimo 6 caracteres');\n    } else {\n      senha1.setCustomValidity('');\n      if (senha1.value != senha2.value) {\n        senha2.setCustomValidity('Digite senhas iguais')\n      } else {\n        senha2.setCustomValidity('');\n      }\n    }\n  }\n\n  function cadastraUsuario(event) {\n    event.preventDefault();\n\n    //Salva as informações em um objeto\n    let cadastro = {\n      \"nome_completo\": formularioCadastro.elements['nome_completo'].value,\n      \"email\": formularioCadastro.elements['email'].value,\n      \"senha\": formularioCadastro.elements['senha1'].value\n    }\n\n    //Chama a API do firebase para gravar o resultado\n    firebase.auth().createUserWithEmailAndPassword(cadastro.email, cadastro.senha)\n      .then(() => {\n        //Se der sucesso, salva o DisplayName\n        firebase.auth().currentUser.updateProfile({\n          displayName: cadastro.nome_completo\n        }).catch(error => console.log(error))\n\n        //Limpa o formulário\n        limpaFormularioCadastro();\n        //Fecha o Modal\n        $('#modal-cadastro').closeModal()\n\n          //Chama um toast avisando que deu certo\n        Materialize.toast('Usuário cadastrado com sucesso', 4000);\n\n        setTimeout(function() {\n          window.location.replace(\"home.html\");\n        }, 1000);\n      })\n      .catch(error => {\n        let mensagem;\n        if (error.code == \"auth/email-already-in-use\") {\n          mensagem = 'E-mail Já cadastrado!';\n        } else if (error.code == \"auth/invalid-email\") {\n          mensagem = 'E-mail Inválido!';\n        } else if(error.code ==\"auth/network-request-failed\"){\n            mensagem = 'Erro ao conectar-se com o servidor, tente novamente.';\n        }else {\n          mensagem = 'Erro ao cadastrar, verifique no console.';\n          console.log(error)\n        }\n        Materialize.toast(mensagem, 4000);\n      })\n  }\n\n  function limpaFormularioCadastro() {\n    let qtdeElementos = document.querySelector('#modal-cadastro form').elements.length;\n    let index = 0;\n    let elementoAtual = {};\n    for (index; index < qtdeElementos; index++) {\n      elementoAtual = document.querySelector('#modal-cadastro form').elements[index];\n      elementoAtual.value = \"\";\n      elementoAtual.classList.remove(\"valid\");\n      elementoAtual.classList.remove(\"invalid\");\n    }\n  }\n});\n"],"sourceRoot":"/source/"}